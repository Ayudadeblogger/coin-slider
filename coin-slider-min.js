(función ($) {var params = new Array; var order = new Array; var images = new Array; var links = new Array; var linksTarget = new Array; var títulos = new Array; var interval = new Array; var imagePos = nueva matriz; var appInterval = nueva matriz; var squarePos = nueva matriz; var reverse = nueva matriz; $. fn.coinslider = $. fn.CoinSlider = función (opciones) {init = función (el) {orden [el. id] = new Array (); imágenes [el.id] = new Array (); enlaces [el.id] = new Array (); linksTarget [el.id] = new Array (); títulos [el.id] = new Array (); imagePos [el.id] = 0; squarePos [el.id] = 0; reverse [el.id] = 1; params [el.id] = $. extend ({}, $. fn .coinslider.defaults, options); $. each ($ ('#' + el.id + 'img'), function (i, item) {images [el.id] [i] = $ (item) .attr ( 'src'); links [el.id] [i] = $ (item) .parent (). is ('a')? $ (item) .parent (). attr ('href'): ''; linksTarget [el.id] [i] = $ (item) .parent (). is ('a')? $ (item) .parent ().attr ('target'): ''; títulos [el.id] [i] = $ (elemento) .next (). is ('span')? $ (item) .next (). html (): ' '; $ (elemento) .hide (); $ (elemento) .next (). hide ();}); $ (el) .css ({' imagen de fondo ':' url ('+ imágenes [el. id] [0] + ')', 'ancho': params [el.id] .width, 'altura': params [el.id] .height, 'posición': 'relativa', 'posición de fondo': 'top left'}). wrap ("<div class = 'coin-slider' id = 'coin-slider -" + el.id + "' />");$('#'+el.id).append ("<div class = 'cs-title' id = 'cs-title -" + el.id + "' style = 'position: absolute; bottom: 0; left: 0; z-index: 1000;'> </ div> "); $. setFields (el); if (params [el.id] .navigation)'; $ (elemento) .hide (); $ (elemento) .next (). hide ();}); $ (el) .css ({' imagen de fondo ':' url ('+ imágenes [el. id] [0] + ')', 'ancho': params [el.id] .width, 'altura': params [el.id] .height, 'posición': 'relativa', 'posición de fondo': 'top left'}). wrap ("<div class = 'coin-slider' id = 'coin-slider -" + el.id + "' />");$('#'+el.id).append ("<div class = 'cs-title' id = 'cs-title -" + el.id + "' style = 'position: absolute; bottom: 0; left: 0; z-index: 1000;'> </ div> "); $. setFields (el); if (params [el.id] .navigation)'; $ (elemento) .hide (); $ (elemento) .next (). hide ();}); $ (el) .css ({' imagen de fondo ':' url ('+ imágenes [el. id] [0] + ')', 'ancho': params [el.id] .width, 'altura': params [el.id] .height, 'posición': 'relativa', 'posición de fondo': 'top left'}). wrap ("<div class = 'coin-slider' id = 'coin-slider -" + el.id + "' />");$('#'+el.id).append ("<div class = 'cs-title' id = 'cs-title -" + el.id + "' style = 'position: absolute; bottom: 0; left: 0; z-index: 1000;'> </ div> "); $. setFields (el); if (params [el.id] .navigation)'relativa', 'posición de fondo': 'arriba a la izquierda'}). wrap ("<div class = 'coin-slider' id = 'coin-slider -" + el.id + "' />"); $ ( '#' + el.id) .append ("<div class = 'cs-title' id = 'cs-title -" + el.id + "' style = 'position: absolute; bottom: 0; left: 0; z-index: 1000; '> </div> "); $. setFields (el); if (params [el.id] .navigation)'relativa', 'posición de fondo': 'arriba a la izquierda'}). wrap ("<div class = 'coin-slider' id = 'coin-slider -" + el.id + "' />"); $ ( '#' + el.id) .append ("<div class = 'cs-title' id = 'cs-title -" + el.id + "' style = 'position: absolute; bottom: 0; left: 0; z-index: 1000; '> </div> "); $. setFields (el); if (params [el.id] .navigation)
$ .setNavigation (el); $. transición (el, 0); $. transiciónCall (el);}
$ .setFields = function (el) {tWidth = sWidth = parseInt (params [el.id] .width / params [el.id] .spw); tHeight = sHeight = parseInt (params [el.id] .height / params [el.id] .sph); counter = sLeft = sTop = 0; tgapx = gapx = params [el.id] .width-params [el.id] .spw * sWidth; tgapy = gapy = params [el.id ] .height-params [el.id] .sph * sHeight; for (i = 1; i <= params [el.id] .sph; i ++) {gapx = tgapx; if (gapy> 0) {gapy-- ; sHeight = tHeight + 1;} else {sHeight = tHeight;}
para (j = 1; j <= params [el.id] .spw; j ++) {if (gapx> 0) {gapx -; sWidth = tWidth + 1;} else {sWidth = tWidth;}
order [el.id] [contador] = i + '' + j; contador ++; if (params [el.id] .links)
$ ('#' + el.id) .append ("<a href = '" + enlaces [el.id] [0] + "' class = 'cs -" + el.id + "' id = 'cs- "+ el.id + i + j +" 'style =' width: "+ sWidth +" px; height: "+ sHeight +" px; float: left; position: absolute; '> </a> "); else
$ ('#' + el.id) .append ("<div class = 'cs -" + el.id + "' id = 'cs -" + el.id + i + j + "' style = 'width:" + sWidth + "px; height:" + sHeight + "px; float: left; position: absoluta; '> </div>"); $ ("# cs -" + el.id + i + j) .css ({ 'posición de fondo': - sLeft + 'px' + (- sTop + 'px'), 'left': sLeft, 'top': sTop}); sLeft + = sWidth;}
sTop + = sHeight; sLeft = 0;}
$ ('. cs -' + el.id) .mouseover (function () {$ ('# cs-navigation -' + el.id) .show ();}); $ ('. cs -' + el .id) .mouseout (function () {$ ('# cs-navigation -' + el.id) .hide ();}); $ ('# cs-title -' + el.id) .mouseover (function () {$ ('# cs-navigation -' + el.id) .show ();}); $ ('# cs-title -' + el.id) .mouseout (function () {$ ('# cs-navigation - '+ el.id) .hide ();}); if (params [el.id] .hoverPause) {$ ('. cs - '+ el.id) .mouseover (function () {params [el.id] .pause = true;}); $ ('. cs -' + el.id) .mouseout (function () {params [el.id] .pause = false;}); $ ('# cs-title - '+ el.id) .mouseover (function () {params [el.id] .pause = true;}); $ (' # cs-title - '+ el.id) .mouseout (function ( ) {params [el.id] .pause = false;});}}; $. transitionCall = function (el) {clearInterval (intervalo [el.id]); delay = params [el.id] .delay + params [el.id] .spw * params [el.id] .sph * params [el.id] .sDelay;intervalo [el.id] = setInterval (función () {$. transición (el)}, retraso);}
$ .transition = function (el, direction) {if (params [el.id] .pause == true) return; $. effect (el); squarePos [el.id] = 0; appInterval [el.id] = setInterval (function () {$. appereance (el, order [el.id] [squarePos [el.id]])}, params [el.id] .sDelay); $ (el) .css ({'background- imagen ':' url ('+ imágenes [el.id] [imagePos [el.id]] +') '}); if (tipo de (dirección) == "indefinido")
imagePos [el.id] ++; else
si (dirección == 'anterior')
imagePos [el.id] -; más
imagePos [el.id] = dirección; if (imagePos [el.id] == imágenes [el.id] .length) {imagePos [el.id] = 0;}
if (imagePos [el.id] == - 1) {imagePos [el.id] = images [el.id] .length-1;}
$ ('. cs-button -' + el.id) .removeClass ('cs-active'); $ ('# cs-button -' + el.id + "-" + (imagePos [el.id] +1 )). addClass ('cs-active'); if (títulos [el.id] [imagePos [el.id]]) {$ ('# cs-title -' + el.id) .css ({'opacidad ': 0}). Animate ({' opacidad ': params [el.id] .opacity}, params [el.id] .titleSpeed); $ (' # cs-title - '+ el.id) .html ( títulos [el.id] [imagePos [el.id]]);} else {$ ('# cs-title -' + el.id) .css ('opacidad', 0);}}; $. appereance = function (el, sid) {$ ('. cs -' + el.id) .attr ('href', links [el.id] [imagePos [el.id]]). attr ('target', linksTarget [ el.id] [imagePos [el.id]]); if (squarePos [el.id] == params [el.id] .spw * params [el.id] .sph) {clearInterval (appInterval [el.id ]);regreso;}
$ ('# cs -' + el.id + sid) .css ({opacidad: 0, 'background-image': 'url (' + imágenes [el.id] [imagePos [el.id]] + ') '}); $ (' # cs - '+ el.id + sid) .animate ({opacidad: 1}, 300); squarePos [el.id] ++;}; $. setNavigation = function (el) { $ (el) .append ("<div id = 'cs-navigation -" + el.id + "'> </div>"); $ ('# cs-navigation -' + el.id) .hide () ; $ ('# cs-navigation -' + el.id) .append ("<a href='#' id='cs-prev-"+el.id+"' class='cs-prev'> prev < /a>");$('#cs-navigation-'+el.id).append("<a href = '#' id = 'cs-next - "+ el.id +"' class = 'cs- siguiente '> siguiente </a> "); $ (' # cs-prev - '+ el.id) .css ({' posición ':' absoluta ',' superior ': params [el.id] .height / 2-15, 'izquierda': 0, 'índice z': 1001, 'line-height ':' 30px ',' opacidad ': params [el.id] .opacity}). click (función (e) {e.preventDefault (); $. transición (el,' prev '); $. transiciónCall (el);}). mouseover (function () {$ ('# cs-navigation -' + el.id) .show ()}); $ ('# cs-next -' + el.id). css ({'position': 'absolute', 'top': params [el.id] .height / 2-15, 'right': 0, 'z-index': 1001, 'line-height': '30px ',' opacidad ': params [el.id] .opacity}). click (función (e) {e.preventDefault (); $. transición (el); $. transiciónCall (el);}). mouseover (función () {$ ('# cs-navigation -' + el.id) .show ()}); $ ("<div id = 'cs-buttons -" + el.id + "' class = 'cs-buttons' > </div> ") .appendTo ($ ('# control deslizante de monedas -' + el.id)); for (k = 1; k <imágenes [el.id] .length + 1; k ++) {$ ( '# botones-cs -' + el.id) .append ("<a href = '#' class = 'cs-button - "+ el.id +"' id = 'cs-button - "+ el.id +" - "+ k +"'> "+ k +" </a> ") ;}
$ .each ($ ('. cs-button -' + el.id), function (i, item) {$ (item) .click (function (e) {$ ('. cs-button -' + el. id) .removeClass ('cs-active'); $ (this) .addClass ('cs-active'); e.preventDefault (); $. transición (el, i); $. transiciónCall (el);}) }); $ ('# cs-navigation -' + el.id + 'a'). mouseout (function () {$ ('# cs-navigation -' + el.id) .hide (); params [el. id] .pause = false;}); $ ("# cs-buttons -" + el.id) .css ({'left': '50%', 'margin-left': - imágenes [el.id] .length * 15 / 2-5, 'posición': 'relativo'});}
$ .effect = function (el) {effA = ['random', 'swirl', 'rain', 'straight']; if (params [el.id] .effect == '')
eff = effA [Math.floor (Math.random () * (effA.length))]; más
eff = params [el.id] .effect; order [el.id] = new Array (); if (eff == 'random') {contador = 0; for (i = 1; i <= params [el. id] .sph; i ++) {for (j = 1; j <= params [el.id] .spw; j ++) {order [el.id] [contador] = i + '' + j; contador ++;}}
$ .random (orden [el.id]);}
if (eff == 'lluvia') {$. lluvia (el);}
si (eff == 'remolino')
$ .swirl (el); if (eff == 'recto')
$ .straight (el); reverse [el.id] * = - 1; if (reverse [el.id]> 0) {order [el.id] .reverse ();}}
$ .random = function (arr) {var i = arr.length; if (i == 0) return false; while (- i) {var j = Math.floor (Math.random () * (i + 1 )); var tempi = arr [i]; var tempj = arr [j]; arr [i] = tempj; arr [j] = tempi;}}
$ .swirl = function (el) {var n = params [el.id] .sph; var m = params [el.id] .spw; var x = 1; var y = 1; var going = 0; var num = 0; var c = 0; var dowhile = true; while (dowhile) {num = (yendo == 0 || yendo == 2)? M: n; for (i = 1; i <= num; i ++) {order [el.id] [c] = x + '' + y; c ++; if (i! = num) {switch (going) {case 0: y ++; break; case 1: x ++; break; case 2: y -; romper; caso 3: x -; romper;}}}
yendo = (yendo + 1)% 4; cambio (yendo) {caso 0: m -; y ++; descanso; caso 1: n -; x ++; descanso; caso 2: m -; y -; descanso; caso 3: n -; x -; romper;}
comprobar = $. max (n, m) - $. min (n, m); if (m <= comprobar && n <= comprobar)
dowhile = false;}}
$ .rain = function (el) {var n = params [el.id] .sph; var m = params [el.id] .spw; var c = 0; var to = to2 = from = 1; var dowhile = verdadero; while (dowhile) {for (i = from; i <= to; i ++) {order [el.id] [c] = i + '' + parseInt (to2-i + 1); c ++;}
to2 ++; if (to <n && to2 <m && n <m) {to ++;}
si (a <n && n> = m) {a ++;}
if (to2> m) {from ++;}
if (de> a) dowhile = false;}}
$ .straight = function (el) {contador = 0; for (i = 1; i <= params [el.id] .sph; i ++) {for (j = 1; j <= params [el.id]. spw; j ++) {orden [el.id] [contador] = i + '' + j; contador ++;}}}
$ .min = function (n, m) {if (n> m) return m; de lo contrario, devuelve n;}
$ .max = function (n, m) {if (n <m) return m; de lo contrario, devuelve n;}
this.each (function () {init (this);});}; $. fn.coinslider.defaults = {width: 565, height: 290, spw: 7, sph: 5, delay: 3000, sDelay: 30 , opacidad: 0.7, titleSpeed: 500, efecto: '', navegación: verdadero, enlaces: verdadero, hoverPause: verdadero};}) (jQuery);
